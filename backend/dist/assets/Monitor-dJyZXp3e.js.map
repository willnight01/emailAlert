{"version":3,"file":"Monitor-dJyZXp3e.js","sources":["../../src/views/Monitor.vue"],"sourcesContent":["<template>\n  <div class=\"monitor\">\n    <!-- 监控控制面板 -->\n    <el-card class=\"control-panel\">\n      <template #header>\n        <div class=\"panel-header\">\n          <div class=\"panel-title-section\">\n            <span>邮件监控控制面板</span>\n            <el-text size=\"small\" type=\"info\" class=\"auto-refresh-tip\">\n              <el-icon><InfoFilled /></el-icon>\n              页面会自动刷新最新配置\n            </el-text>\n          </div>\n          <div class=\"control-actions\">\n            <el-button \n              type=\"success\" \n              @click=\"startMonitor\" \n              :loading=\"starting\"\n              :disabled=\"monitorStatus === 'running'\"\n            >\n              <el-icon><VideoPlay /></el-icon>\n              启动监控\n            </el-button>\n            <el-button \n              type=\"danger\" \n              @click=\"stopMonitor\" \n              :loading=\"stopping\"\n              :disabled=\"monitorStatus !== 'running'\"\n            >\n              <el-icon><VideoPause /></el-icon>\n              停止监控\n            </el-button>\n            <el-button \n              type=\"primary\" \n              @click=\"refreshConfig\" \n              :loading=\"refreshing\"\n              title=\"重新加载邮箱配置并更新监控服务\"\n            >\n              <el-icon><Refresh /></el-icon>\n              刷新配置\n            </el-button>\n          </div>\n        </div>\n      </template>\n      \n      <!-- 监控状态展示 -->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <div class=\"status-item\">\n            <div class=\"status-icon\">\n              <el-icon \n                :class=\"['status-indicator', getStatusClass()]\"\n                :color=\"getStatusColor()\"\n              >\n                <component :is=\"getStatusIcon()\" />\n              </el-icon>\n            </div>\n            <div class=\"status-content\">\n              <div class=\"status-title\">监控状态</div>\n              <div class=\"status-value\">{{ getStatusText() }}</div>\n            </div>\n          </div>\n        </el-col>\n        \n        <el-col :span=\"6\">\n          <div class=\"status-item\">\n            <div class=\"status-icon\">\n              <el-icon color=\"#409eff\">\n                <Message />\n              </el-icon>\n            </div>\n            <div class=\"status-content\">\n              <div class=\"status-title\">监控邮箱</div>\n              <div class=\"status-value\">{{ monitorStats.activeMailboxes || 0 }}</div>\n            </div>\n          </div>\n        </el-col>\n        \n        <el-col :span=\"6\">\n          <div class=\"status-item\">\n            <div class=\"status-icon\">\n              <el-icon color=\"#67c23a\">\n                <Download />\n              </el-icon>\n            </div>\n            <div class=\"status-content\">\n              <div class=\"status-title\">今日邮件</div>\n              <div class=\"status-value\">{{ monitorStats.todayEmails || 0 }}</div>\n            </div>\n          </div>\n        </el-col>\n        \n        <el-col :span=\"6\">\n          <div class=\"status-item\">\n            <div class=\"status-icon\">\n              <el-icon color=\"#f56c6c\">\n                <Warning />\n              </el-icon>\n            </div>\n            <div class=\"status-content\">\n              <div class=\"status-title\">错误次数</div>\n              <div class=\"status-value\">{{ monitorStats.errorCount || 0 }}</div>\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n\n    <!-- 邮箱监控详情 -->\n    <el-row :gutter=\"20\" class=\"mt-20\">\n      <el-col :span=\"16\">\n        <el-card>\n          <template #header>\n            <div class=\"card-header\">\n              <span>邮箱监控详情</span>\n              <el-button type=\"text\" @click=\"refreshMailboxStatus\">\n                <el-icon><Refresh /></el-icon>\n                刷新\n              </el-button>\n            </div>\n          </template>\n          \n          <el-table \n            :data=\"mailboxStatuses\" \n            style=\"width: 100%\" \n            v-loading=\"loadingStatuses\"\n          >\n            <el-table-column prop=\"name\" label=\"邮箱名称\" width=\"150\" />\n            <el-table-column prop=\"email\" label=\"邮箱地址\" width=\"200\" />\n            <el-table-column label=\"监控状态\" width=\"120\">\n              <template #default=\"scope\">\n                <el-tag \n                  :type=\"scope.row.status === 'monitoring' ? 'success' : 'danger'\"\n                  size=\"small\"\n                >\n                  {{ scope.row.status === 'monitoring' ? '监控中' : '已停止' }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"lastCheck\" label=\"最后检查\" width=\"160\">\n              <template #default=\"scope\">\n                {{ formatTime(scope.row.lastCheck) }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"emailCount\" label=\"邮件数量\" width=\"100\" />\n            <el-table-column label=\"连接状态\" width=\"120\">\n              <template #default=\"scope\">\n                <el-tag \n                  :type=\"scope.row.connected ? 'success' : 'danger'\"\n                  size=\"small\"\n                >\n                  {{ scope.row.connected ? '已连接' : '连接失败' }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"errorMessage\" label=\"错误信息\" min-width=\"200\">\n              <template #default=\"scope\">\n                <span v-if=\"scope.row.errorMessage\" class=\"error-text\">\n                  {{ scope.row.errorMessage }}\n                </span>\n                <span v-else class=\"success-text\">正常</span>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n      \n      <el-col :span=\"8\">\n        <el-card>\n          <template #header>\n            <div class=\"card-header\">\n              <span>实时日志</span>\n              <el-button type=\"text\" @click=\"clearLogs\">\n                <el-icon><Delete /></el-icon>\n                清空\n              </el-button>\n            </div>\n          </template>\n          \n          <div class=\"log-container\" ref=\"logContainer\">\n            <div \n              v-for=\"(log, index) in logs\" \n              :key=\"index\" \n              :class=\"['log-item', log.level]\"\n            >\n              <span class=\"log-time\">{{ formatTime(log.timestamp) }}</span>\n              <span class=\"log-message\">{{ log.message }}</span>\n            </div>\n            <div v-if=\"logs.length === 0\" class=\"no-logs\">\n              暂无日志信息\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!-- 邮件统计图表 -->\n    <el-row class=\"mt-20\">\n      <el-col :span=\"24\">\n        <el-card>\n          <template #header>\n            <div class=\"card-header\">\n              <span>邮件处理统计</span>\n              <el-radio-group v-model=\"statsTimeRange\" size=\"small\">\n                <el-radio-button label=\"1h\">最近1小时</el-radio-button>\n                <el-radio-button label=\"24h\">最近24小时</el-radio-button>\n                <el-radio-button label=\"7d\">最近7天</el-radio-button>\n              </el-radio-group>\n            </div>\n          </template>\n          \n          <div class=\"chart-container\">\n            <div class=\"chart-placeholder\">\n              <el-icon><TrendCharts /></el-icon>\n              <span>邮件处理统计图表（待集成图表库）</span>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, onActivated, nextTick } from 'vue'\nimport { \n  VideoPlay, VideoPause, Refresh, Message, Download, Warning,\n  Delete, TrendCharts, CircleCheck, CircleClose, Loading, InfoFilled\n} from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\nimport { monitorAPI, mailboxAPI } from '@/api'\n\n// 响应式数据\nconst monitorStatus = ref('stopped') // 'running', 'stopped', 'error'\nconst starting = ref(false)\nconst stopping = ref(false)\nconst refreshing = ref(false)\nconst loadingStatuses = ref(false)\n\n// 监控统计数据\nconst monitorStats = ref({\n  activeMailboxes: 0,\n  todayEmails: 0,\n  errorCount: 0\n})\n\n// 邮箱状态列表\nconst mailboxStatuses = ref([])\n\n// 日志相关\nconst logs = ref([])\nconst logContainer = ref()\n\n// 统计时间范围\nconst statsTimeRange = ref('24h')\n\n// 定时器和日志流\nlet statusTimer = null\nlet logEventSource = null\n\n// 生命周期\nonMounted(async () => {\n  // 首先加载监控状态\n  await loadMonitorStatus()\n  \n  // 自动刷新配置以确保显示最新的邮箱配置\n  addLog('info', '页面加载时自动刷新配置...')\n  try {\n    if (monitorStatus.value === 'running') {\n      // 如果监控正在运行，通过监控服务刷新配置\n      await monitorAPI.refresh()\n      addLog('success', '监控配置已自动刷新')\n    } else {\n      // 如果监控未运行，只需要重新加载邮箱状态\n      addLog('info', '监控未运行，直接刷新邮箱状态')\n    }\n  } catch (error) {\n    console.warn('自动刷新配置失败:', error)\n    addLog('warning', '自动刷新配置失败，请手动刷新')\n  }\n  \n  // 加载邮箱状态\n  await loadMailboxStatuses()\n  \n  // 开始定时轮询\n  startPolling()\n})\n\nonUnmounted(() => {\n  stopPolling()\n})\n\n// 页面激活时（从其他页面切换回来）自动刷新状态\nonActivated(async () => {\n  addLog('info', '页面激活，检查配置更新...')\n  \n  // 重新加载监控状态\n  await loadMonitorStatus()\n  \n  // 如果监控正在运行，刷新配置以获取最新邮箱列表\n  if (monitorStatus.value === 'running') {\n    try {\n      await monitorAPI.refresh()\n      addLog('success', '配置已更新到最新状态')\n    } catch (error) {\n      console.warn('激活时刷新配置失败:', error)\n    }\n  }\n  \n  // 重新加载邮箱状态\n  await loadMailboxStatuses()\n})\n\n// 方法\nconst loadMonitorStatus = async () => {\n  try {\n    const response = await monitorAPI.status()\n    // 修复状态获取：后端返回的是is_running字段，不是status字段\n    const isRunning = response.data.is_running\n    monitorStatus.value = isRunning ? 'running' : 'stopped'\n    \n    // 加载统计数据\n    if (monitorStatus.value === 'running') {\n      loadMonitorStats()\n    }\n  } catch (error) {\n    console.error('加载监控状态失败:', error)\n    monitorStatus.value = 'error'\n  }\n}\n\nconst loadMonitorStats = async () => {\n  try {\n    const response = await monitorAPI.stats()\n    monitorStats.value = response.data || {}\n  } catch (error) {\n    console.error('加载监控统计失败:', error)\n  }\n}\n\nconst loadMailboxStatuses = async () => {\n  loadingStatuses.value = true\n  try {\n    const response = await mailboxAPI.list({ status: 'active' })\n    // 修复数据字段名：后端返回的是list字段，不是items字段\n    const mailboxes = response.data.list || []\n    \n    // 增强邮箱状态信息\n    mailboxStatuses.value = mailboxes.map(mailbox => ({\n      ...mailbox,\n      status: monitorStatus.value === 'running' ? 'monitoring' : 'stopped',\n      lastCheck: monitorStatus.value === 'running' ? new Date() : null,\n      emailCount: 0, // 初始为0，后续可以从统计API获取\n      connected: mailbox.status === 'active', // 基于邮箱激活状态\n      errorMessage: mailbox.status !== 'active' ? '邮箱未激活' : null\n    }))\n    \n    console.log('加载邮箱监控状态:', mailboxStatuses.value)\n  } catch (error) {\n    console.error('加载邮箱状态失败:', error)\n    ElMessage.error('加载邮箱状态失败')\n  } finally {\n    loadingStatuses.value = false\n  }\n}\n\nconst startMonitor = async () => {\n  starting.value = true\n  try {\n    await monitorAPI.start()\n    monitorStatus.value = 'running'\n    ElMessage.success('邮件监控已启动')\n    addLog('info', '邮件监控服务已启动')\n    loadMonitorStats()\n  } catch (error) {\n    // 提取错误信息，优先使用响应数据中的消息\n    let errorMessage = '未知错误'\n    if (error.response?.data?.message) {\n      errorMessage = error.response.data.message\n    } else if (error.response?.data?.error) {\n      errorMessage = error.response.data.error\n    } else if (error.message) {\n      errorMessage = error.message\n    }\n    \n    console.error('启动监控错误详情:', error)\n    ElMessage.error('启动监控失败: ' + errorMessage)\n    addLog('error', '启动监控失败: ' + errorMessage)\n  } finally {\n    starting.value = false\n  }\n}\n\nconst stopMonitor = async () => {\n  stopping.value = true\n  try {\n    await monitorAPI.stop()\n    monitorStatus.value = 'stopped'\n    ElMessage.success('邮件监控已停止')\n    addLog('warning', '邮件监控服务已停止')\n  } catch (error) {\n    // 提取错误信息，优先使用响应数据中的消息\n    let errorMessage = '未知错误'\n    if (error.response?.data?.message) {\n      errorMessage = error.response.data.message\n    } else if (error.response?.data?.error) {\n      errorMessage = error.response.data.error\n    } else if (error.message) {\n      errorMessage = error.message\n    }\n    \n    console.error('停止监控错误详情:', error)\n    ElMessage.error('停止监控失败: ' + errorMessage)\n    addLog('error', '停止监控失败: ' + errorMessage)\n  } finally {\n    stopping.value = false\n  }\n}\n\nconst refreshConfig = async () => {\n  refreshing.value = true\n  try {\n    // 如果监控正在运行，刷新监控服务的配置\n    if (monitorStatus.value === 'running') {\n      await monitorAPI.refresh()\n      addLog('success', '监控服务配置已刷新')\n    } else {\n      addLog('info', '监控未运行，跳过服务配置刷新')\n    }\n    \n    // 无论监控是否运行，都重新加载页面显示的邮箱状态\n    await loadMailboxStatuses()\n    \n    ElMessage.success('配置已刷新')\n    addLog('success', '页面配置刷新完成')\n  } catch (error) {\n    // 提取错误信息，优先使用响应数据中的消息\n    let errorMessage = '未知错误'\n    if (error.response?.data?.message) {\n      errorMessage = error.response.data.message\n    } else if (error.response?.data?.error) {\n      errorMessage = error.response.data.error\n    } else if (error.message) {\n      errorMessage = error.message\n    }\n    \n    console.error('刷新配置错误详情:', error)\n    ElMessage.error('刷新配置失败: ' + errorMessage)\n    addLog('error', '刷新配置失败: ' + errorMessage)\n  } finally {\n    refreshing.value = false\n  }\n}\n\nconst refreshMailboxStatus = () => {\n  loadMailboxStatuses()\n}\n\nconst addLog = (level, message, timestamp = null) => {\n  logs.value.unshift({\n    timestamp: timestamp ? new Date(timestamp) : new Date(),\n    level,\n    message\n  })\n  \n  // 限制日志数量\n  if (logs.value.length > 100) {\n    logs.value = logs.value.slice(0, 100)\n  }\n  \n  // 滚动到最新日志\n  nextTick(() => {\n    if (logContainer.value) {\n      logContainer.value.scrollTop = 0\n    }\n  })\n}\n\nconst clearLogs = () => {\n  logs.value = []\n}\n\nconst startPolling = () => {\n  // 定期检查监控状态\n  statusTimer = setInterval(() => {\n    loadMonitorStatus()\n    if (monitorStatus.value === 'running') {\n      loadMonitorStats()\n    }\n  }, 30000) // 30秒检查一次\n  \n  // 创建实时日志连接\n  startLogStream()\n}\n\nconst startLogStream = () => {\n  if (logEventSource) {\n    logEventSource.close()\n  }\n  \n  try {\n    logEventSource = monitorAPI.createLogStream(\n      // 接收日志回调\n      (logData) => {\n        addLog(logData.level, logData.message, logData.timestamp)\n      },\n      // 错误处理回调\n      (error) => {\n        console.error('日志流连接错误:', error)\n        addLog('error', '日志连接中断，尝试重新连接...')\n        \n        // 3秒后重试连接\n        setTimeout(() => {\n          if (monitorStatus.value === 'running') {\n            startLogStream()\n          }\n        }, 3000)\n      }\n    )\n  } catch (error) {\n    console.error('创建日志流失败:', error)\n    addLog('error', '无法建立日志连接')\n  }\n}\n\nconst stopPolling = () => {\n  if (statusTimer) {\n    clearInterval(statusTimer)\n    statusTimer = null\n  }\n  if (logEventSource) {\n    logEventSource.close()\n    logEventSource = null\n  }\n}\n\nconst getStatusClass = () => {\n  switch (monitorStatus.value) {\n    case 'running': return 'running'\n    case 'stopped': return 'stopped'\n    case 'error': return 'error'\n    default: return 'unknown'\n  }\n}\n\nconst getStatusColor = () => {\n  switch (monitorStatus.value) {\n    case 'running': return '#67c23a'\n    case 'stopped': return '#909399'\n    case 'error': return '#f56c6c'\n    default: return '#909399'\n  }\n}\n\nconst getStatusIcon = () => {\n  switch (monitorStatus.value) {\n    case 'running': return CircleCheck\n    case 'stopped': return CircleClose\n    case 'error': return Warning\n    default: return Loading\n  }\n}\n\nconst getStatusText = () => {\n  switch (monitorStatus.value) {\n    case 'running': return '运行中'\n    case 'stopped': return '已停止'\n    case 'error': return '错误'\n    default: return '未知'\n  }\n}\n\nconst formatTime = (timestamp) => {\n  if (!timestamp) return ''\n  const date = new Date(timestamp)\n  return date.toLocaleString('zh-CN', {\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  })\n}\n</script>\n\n<style scoped>\n.monitor {\n  padding: 0;\n}\n\n.control-panel {\n  margin-bottom: 20px;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.panel-title-section {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.auto-refresh-tip {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  opacity: 0.8;\n}\n\n.control-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.status-item {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  background: var(--el-fill-color-lighter);\n  border-radius: 8px;\n  height: 100px;\n}\n\n.status-icon {\n  margin-right: 15px;\n}\n\n.status-icon .el-icon {\n  font-size: 32px;\n}\n\n.status-indicator {\n  animation: pulse 2s infinite;\n}\n\n.status-indicator.running {\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n.status-content {\n  flex: 1;\n}\n\n.status-title {\n  font-size: 14px;\n  color: var(--el-text-color-regular);\n  margin-bottom: 8px;\n}\n\n.status-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: var(--el-text-color-primary);\n}\n\n.mt-20 {\n  margin-top: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.error-text {\n  color: var(--el-color-danger);\n  font-size: 12px;\n}\n\n.success-text {\n  color: var(--el-color-success);\n  font-size: 12px;\n}\n\n.log-container {\n  height: 400px;\n  overflow-y: auto;\n  background: var(--el-fill-color-lighter);\n  border-radius: 4px;\n  padding: 10px;\n}\n\n.log-item {\n  display: flex;\n  margin-bottom: 8px;\n  font-size: 12px;\n  line-height: 1.4;\n}\n\n.log-time {\n  color: var(--el-text-color-regular);\n  margin-right: 10px;\n  white-space: nowrap;\n}\n\n.log-message {\n  flex: 1;\n}\n\n.log-item.info .log-message {\n  color: var(--el-color-primary);\n}\n\n.log-item.success .log-message {\n  color: var(--el-color-success);\n}\n\n.log-item.warning .log-message {\n  color: var(--el-color-warning);\n}\n\n.log-item.error .log-message {\n  color: var(--el-color-danger);\n}\n\n.no-logs {\n  text-align: center;\n  color: var(--el-text-color-placeholder);\n  padding: 50px 0;\n}\n\n.chart-container {\n  height: 300px;\n}\n\n.chart-placeholder {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--el-fill-color-light);\n  border-radius: 4px;\n  color: var(--el-text-color-placeholder);\n  gap: 10px;\n}\n\n.chart-placeholder .el-icon {\n  font-size: 48px;\n}\n\n:deep(.el-table .el-table__cell) {\n  padding: 8px 0;\n}\n</style> "],"names":["monitorStatus","ref","starting","stopping","refreshing","loadingStatuses","monitorStats","mailboxStatuses","logs","logContainer","statsTimeRange","statusTimer","logEventSource","onMounted","loadMonitorStatus","addLog","monitorAPI","error","loadMailboxStatuses","startPolling","onUnmounted","stopPolling","onActivated","isRunning","loadMonitorStats","response","mailboxes","mailboxAPI","mailbox","ElMessage","startMonitor","errorMessage","_b","_a","_d","_c","stopMonitor","refreshConfig","refreshMailboxStatus","level","message","timestamp","nextTick","clearLogs","startLogStream","logData","getStatusClass","getStatusColor","getStatusIcon","CircleCheck","CircleClose","Warning","Loading","getStatusText","formatTime","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_component_el_text","_component_el_icon","_unref","InfoFilled","_hoisted_4","_component_el_button","VideoPlay","VideoPause","Refresh","_component_el_row","_component_el_col","_hoisted_5","_hoisted_6","_createBlock","_resolveDynamicComponent","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","Message","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","Download","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_component_el_table","_component_el_table_column","_withCtx","scope","_component_el_tag","_createTextVNode","_hoisted_22","_hoisted_23","_hoisted_24","Delete","_Fragment","_renderList","log","index","_normalizeClass","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_component_el_radio_group","$event","_component_el_radio_button","_hoisted_29","_hoisted_30","TrendCharts"],"mappings":"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"}